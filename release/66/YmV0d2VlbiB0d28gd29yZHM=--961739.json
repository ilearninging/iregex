{"id":"177705","urlID":"3bq9r","name":"between two words","description":"Regex for catching two words, in which between can be no more than 600 words","content":"define('layoutManager',['jquery','serverManager','layoutSidebarRlos','RloView','layoutSidebarRight','layoutCreateRlo','layoutSidebarRightAdd','layoutPanelButtons','layoutRloButtons','Utils'\n\n    \/\/ resources\n    , 'ResourceTextModel'               , 'resourceTextEdit'                , 'resourceText'\n    , 'ResourceImageModel'              , 'resourceImageEdit'               , 'resourceImage'\n    , 'ResourceVideoModel'              , 'resourceVideoEdit'               , 'resourceVideo'\n    , 'ResourceAudioModel'              , 'resourceAudioEdit'               , 'resourceAudio'\n    , 'ResourceOnlineVideoModel'        , 'resourceOnlineVideoEdit'         , 'resourceOnlineVideo'\n    , 'ResourceMatchingModel'           , 'resourceMatchingEdit'            , 'resourceMatching'\n    , 'ResourceHTMLModel'               , 'resourceHTMLEdit'                , 'resourceHTML'\n\n    \/\/ quizzes\n    , 'ResourceTrueFalseModel'          , 'resourceTrueFalseEdit'           , 'resourceTrueFalse'\n    , 'ResourceSingleChoiceModel'       , 'resourceSingleChoiceEdit'        , 'resourceSingleChoice'\n    , 'ResourceMultipleChoiceModel'     , 'resourceMultipleChoiceEdit'      , 'resourceMultipleChoice'\n\n\n    \/\/ templates\n    , 'ResourcePuzzleModel'             , 'resourcePuzzleEdit'              , 'resourcePuzzle'\n    , 'ResourceSlideshowModel'          , 'resourceSlideshowEdit'           , 'resourceSlideshow'\n    , 'ResourceHotspotModel'            , 'resourceHotspotEdit'             , 'resourceHotspot'\n    , 'ResourceTriviaModel'             , 'resourceTriviaEdit'              , 'resourceTrivia'\n    , 'ResourceCrosswordsModel'         , 'resourceCrosswordsEdit'          , 'resourceCrosswords'\n    , 'ResourceMapModel'                , 'resourceMapEdit'                 , 'resourceMap'\n    , 'ResourceClassroomTriviaModel'    , 'resourceClassroomTriviaEdit'     , 'resourceClassroomTrivia'\n    , 'ResourceTimelineModel'           , 'resourceTimelineEdit'            , 'resourceTimeline'\n\n\n    ],function($,serverManager,LayoutSidebarRlos,RloView,LayoutSidebarRight,LayoutCreateRlo,LayoutSidebarRightAdd,LayoutPanelButtons,LayoutRloButtons, Utils){\n\n    var BASIC_RLO = 0;\n    var QUIZ_RLO = 1;\n    var RLO_TITLE = '';\n\n    var LayoutManager = function(){\n        this.layout = null;\n        this.lessonID = -1;\n    };\n\n    LayoutManager.prototype = {\n        init:function(){\n            $(window).resize(function() { Utils.workAreaPosition(); });\n\n            this.initServerCalls();\n            this.handleSidebarMenu();\n            this.handleMobileSidebarToggle();\n            this.handleSidebarMinify();\n            this.handleAfterPageLoadAddClass();\n\n            this.handelTooltipPopoverActivation();\n            this.handleScrollToTopButton();\n            this.reload();\n            this.handleIEFullHeightContent();\n            this.handleUnlimitedTabsRender();\n        },\n        reload:function(){\n            $.when($('#page-loader').addClass('hide')).done(function() {\n                $('#page-container').addClass('in');\n            });\n        },\n        handlePanelAction: function() {\n            \"use strict\";\n            \/\/ remove\n            $('[data-click=panel-remove]').hover(function() {\n                $(this).tooltip({\n                    title: 'Remove',\n                    placement: 'bottom',\n                    trigger: 'hover',\n                    container: 'body'\n                });\n                $(this).tooltip('show');\n            });\n            $('[data-click=panel-remove]').click(function(e) {\n                e.preventDefault();\n                $(this).tooltip('destroy');\n                $(this).closest('.panel').remove();\n            });\n\n            \/\/ collapse\n            $('[data-click=panel-collapse]').hover(function() {\n                $(this).tooltip({\n                    title: 'Collapse',\n                    placement: 'bottom',\n                    trigger: 'hover',\n                    container: 'body'\n                });\n                $(this).tooltip('show');\n            });\n            $('[data-click=panel-collapse]').click(function(e) {\n                e.preventDefault();\n                $(this).closest('.panel').find('.panel-body').slideToggle();\n                $(this).find('i').toggleClass('fa-minus fa-plus');\n            });\n\n            \/\/ reload\n            $('[data-click=panel-reload]').hover(function() {\n                $(this).tooltip({\n                    title: 'Reload',\n                    placement: 'bottom',\n                    trigger: 'hover',\n                    container: 'body'\n                });\n                $(this).tooltip('show');\n            });\n            $('[data-click=panel-reload]').click(function(e) {\n                e.preventDefault();\n                var target = $(this).closest('.panel');\n                if (!$(target).hasClass('panel-loading')) {\n                    var targetBody = $(target).find('.panel-body');\n                    var spinnerHtml = '<div class=\"panel-loader\"><span class=\"spinner-small\"><\/span><\/div>';\n                    $(target).addClass('panel-loading');\n                    $(targetBody).prepend(spinnerHtml);\n                    setTimeout(function() {\n                        $(target).removeClass('panel-loading');\n                        $(target).find('.panel-loader').remove();\n                    }, 2000);\n                }\n            });\n\n            \/\/ expand\n            $('[data-click=panel-expand]').hover(function() {\n                $(this).tooltip({\n                    title: 'Expand',\n                    placement: 'bottom',\n                    trigger: 'hover',\n                    container: 'body'\n                });\n                $(this).tooltip('show');\n            });\n            $('[data-click=panel-expand]').click(function(e) {\n                e.preventDefault();\n                var target = $(this).closest('.panel');\n                var targetBody = $(target).find('.panel-body');\n                var targetTop = 40;\n                if ($(targetBody).length !== 0) {\n                    var targetOffsetTop = $(target).offset().top;\n                    var targetBodyOffsetTop = $(targetBody).offset().top;\n                    targetTop = targetBodyOffsetTop - targetOffsetTop;\n                }\n\n                if ($('body').hasClass('panel-expand') && $(target).hasClass('panel-expand')) {\n                    $('body, .panel').removeClass('panel-expand');\n                    $('.panel').removeAttr('style');\n                    $(targetBody).removeAttr('style');\n                } else {\n                    $('body').addClass('panel-expand');\n                    $(this).closest('.panel').addClass('panel-expand');\n\n                    if ($(targetBody).length !== 0 && targetTop != 40) {\n                        var finalHeight = 40;\n                        $(target).find(' > *').each(function() {\n                            var targetClass = $(this).attr('class');\n\n                            if (targetClass != 'panel-heading' && targetClass != 'panel-body') {\n                                finalHeight += $(this).height() + 30;\n                            }\n                        });\n                        if (finalHeight != 40) {\n                            $(targetBody).css('top', finalHeight + 'px');\n                        }\n                    }\n                }\n                $(window).trigger('resize');\n            });\n        },\n        handelTooltipPopoverActivation : function() {\n            \"use strict\";\n            $('[data-toggle=tooltip]').tooltip({\n                trigger: 'hover'\n            });\n            $('[data-toggle=popover]').popover();\n            \/\/moved to layoutCreateRlo class\n          \/*  $('[data-toggle*=popover-add-rlo]').popover({\n                html : true,\n                viewport: { selector: 'main', padding: 10 },\n                title: 'Create RLO',\n                content: '<p>Please fill the following fields in order to create a new RLO:<\/p><p><button id=\"addExpozitiveRloBtn\" class=\"btn btn-lg btn-block btn-inverse\"><span class=\"fa fa-users\"><\/span> Learning Activity<\/button><\/p><p><button id=\"addAssessmentRloBtn\" class=\"btn btn-lg btn-block btn-inverse\"><span class=\"fa fa-check-circle-o\"><\/span> Assessment Activity<\/button><\/p>'\n            });*\/\n             $('[data-toggle=popover-instructions]').popover({\n                 html : true,\n                 viewport: { selector: 'main', padding: 10 },\n                 template: '<div class=\"popover\" role=\"tooltip\"><div class=\"arrow\"><\/div><h3 class=\"popover-title bg-blue\"><\/h3><div class=\"popover-content\"><\/div><\/div>',\n                 title: 'Insert instructions here',\n                 content: '<p><input id=\"indicatiiBasic\" type=\"text\" value=\"\" placeholder=\"type here\"><\/p>'\n             });\n        },\n    \/* 09. Handle Scroll to Top Button Activation\n     ------------------------------------------------ *\/\n        handleScrollToTopButton : function() {\n            \"use strict\";\n            $(document).scroll( function() {\n                var totalScroll = $(document).scrollTop();\n\n                if (totalScroll >= 200) {\n                    $('[data-click=scroll-top]').addClass('in');\n                } else {\n                    $('[data-click=scroll-top]').removeClass('in');\n                }\n            });\n\n            $('[data-click=scroll-top]').click(function(e) {\n                e.preventDefault();\n                $('html, body').animate({\n                    scrollTop: $(\"body\").offset().top\n                }, 500);\n            });\n        },\n        handleSidebarMenu : function() {\n            $('.sidebar .nav > .has-sub > a').click(function() {\n                \/\/console.log('CLICK')\n                var target = $(this).next('.sub-menu');\n                var otherMenu = '.sidebar .nav > li.has-sub > .sub-menu';\n\n                if ($('.page-sidebar-minified').length === 0) {\n                    $(otherMenu).not(target).slideUp(250, function() {\n                        $(this).closest('li').removeClass('expand');\n                    });\n                    $(target).slideToggle(250, function() {\n                        var targetLi = $(this).closest('li');\n                        if ($(targetLi).hasClass('expand')) {\n                            $(targetLi).removeClass('expand');\n                        } else {\n                            $(targetLi).addClass('expand');\n                        }\n                    });\n                }\n            });\n            $('.sidebar .nav > .has-sub .sub-menu li.has-sub > a').click(function() {\n                if ($('.page-sidebar-minified').length === 0) {\n                    var target = $(this).next('.sub-menu');\n                    $(target).slideToggle(250);\n                }\n            });\n        },\n        handleMobileSidebarToggle: function() {\n            var sidebarProgress = false;\n            $('.sidebar').on('click touchstart', function(e) {\n                if ($(e.target).closest('.sidebar').length !== 0) {\n                    sidebarProgress = true;\n                } else {\n                    sidebarProgress = false;\n                    \/\/e.stopPropagation();\n                }\n            });\n\n            $(document).on('click touchstart', function(e) {\n                if ($(e.target).closest('.sidebar').length === 0) {\n                    sidebarProgress = false;\n                }\n                if (!e.isPropagationStopped() && sidebarProgress !== true) {\n                    if ($('#page-container').hasClass('page-sidebar-toggled')) {\n                        sidebarProgress = true;\n                        $('#page-container').removeClass('page-sidebar-toggled');\n                    }\n                    if ($(window).width() < 979) {\n                        if ($('#page-container').hasClass('page-with-two-sidebar')) {\n                            sidebarProgress = true;\n                            $('#page-container').removeClass('page-right-sidebar-toggled');\n                        }\n                    }\n                }\n            });\n\n            $('[data-click=right-sidebar-toggled]').click(function(e) {\n                e.stopPropagation();\n                var targetContainer = '#page-container';\n                var targetClass = 'page-right-sidebar-collapsed';\n                targetClass = ($(window).width() < 979) ? 'page-right-sidebar-toggled' : targetClass;\n                if ($(targetContainer).hasClass(targetClass)) {\n                    $(targetContainer).removeClass(targetClass);\n                } else if (sidebarProgress !== true) {\n                    $(targetContainer).addClass(targetClass);\n                } else {\n                    sidebarProgress = false;\n                }\n                if ($(window).width() < 480) {\n                    $('#page-container').removeClass('page-sidebar-toggled');\n                }\n            });\n\n            $('[data-click=sidebar-toggled]').click(function(e) {\n                e.stopPropagation();\n                var sidebarClass = 'page-sidebar-toggled';\n                var targetContainer = '#page-container';\n\n                if ($(targetContainer).hasClass(sidebarClass)) {\n                    $(targetContainer).removeClass(sidebarClass);\n                } else if (sidebarProgress !== true) {\n                    $(targetContainer).addClass(sidebarClass);\n                } else {\n                    sidebarProgress = false;\n                }\n                if ($(window).width() < 480) {\n                    $('#page-container').removeClass('page-right-sidebar-toggled');\n                }\n            });\n        },\n        handleSidebarMinify: function() {\n            $('[data-click=sidebar-minify], .rlos-list').click(function(e) {\n                e.preventDefault();\n                var sidebarClass = 'page-sidebar-minified';\n                var targetContainer = '#page-container';\n                if ($(targetContainer).hasClass(sidebarClass)) {\n                    $(targetContainer).removeClass(sidebarClass);\n                    if ($(targetContainer).hasClass('page-sidebar-fixed')) {\n                        Utils.generateSlimScroll($('#sidebar [data-scrollbar=\"true\"]'));\n                    }\n                } else {\n                    $(targetContainer).addClass(sidebarClass);\n                    if ($(targetContainer).hasClass('page-sidebar-fixed')) {\n                        $('#sidebar [data-scrollbar=\"true\"]').slimScroll({destroy: true});\n                        $('#sidebar [data-scrollbar=\"true\"]').removeAttr('style');\n                    }\n                    \/\/ firefox bugfix\n                    $('#sidebar [data-scrollbar=true]').trigger('mouseover');\n                }\n                $(window).trigger('resize');\n            });\n            $('[data-click=sidebar-minify-right]').click(function(e) {\n                e.preventDefault();\n                var sidebarClass = 'page-sidebar-minified-right';\n                var targetContainer = '#page-container';\n                if ($(targetContainer).hasClass(sidebarClass)) {\n                    $(targetContainer).removeClass(sidebarClass);\n                    if ($(targetContainer).hasClass('page-sidebar-fixed')) {\n                        Utils.generateSlimScroll($('#sidebar-right [data-scrollbar=\"true\"]'));\n                    }\n                } else {\n                    $(targetContainer).addClass(sidebarClass);\n                    if ($(targetContainer).hasClass('page-sidebar-fixed')) {\n                        $('#sidebar-right [data-scrollbar=\"true\"]').slimScroll({destroy: true});\n                        $('#sidebar-right [data-scrollbar=\"true\"]').removeAttr('style');\n                    }\n                    \/\/ firefox bugfix\n                    $('#sidebar-right [data-scrollbar=true]').trigger('mouseover');\n                }\n                $(window).trigger('resize');\n            });\n        },\n        \/* 12. Handle After Page Load Add Class Function - added in V1.2\n         ------------------------------------------------ *\/\n        handleAfterPageLoadAddClass : function() {\n            if ($('[data-pageload-addclass]').length !== 0) {\n                $(window).load(function() {\n                    $('[data-pageload-addclass]').each(function() {\n                        var targetClass = $(this).attr('data-pageload-addclass');\n                        $(this).addClass(targetClass);\n                    });\n                });\n            }\n        },\n        handleIEFullHeightContent : function() {\n            var userAgent = window.navigator.userAgent;\n            var msie = userAgent.indexOf(\"MSIE \");\n\n            if (msie > 0 || !!navigator.userAgent.match(\/Trident.*rv\\:11\\.\/)) {\n                $('.vertical-box-row [data-scrollbar=\"true\"][data-height=\"100%\"]').each(function() {\n                    var targetRow = $(this).closest('.vertical-box-row');\n                    var targetHeight = $(targetRow).height();\n                    $(targetRow).find('.vertical-box-cell').height(targetHeight);\n                });\n            }\n        },\n        handleUnlimitedTabsRender : function() {\n\n            \/\/ function handle tab overflow scroll width\n            function handleTabOverflowScrollWidth(obj, animationSpeed) {\n                var marginLeft = parseInt($(obj).css('margin-left'));\n                var viewWidth = $(obj).width();\n                var prevWidth = $(obj).find('li.active').width();\n                var speed = (animationSpeed > -1) ? animationSpeed : 150;\n                var fullWidth = 0;\n\n                $(obj).find('li.active').prevAll().each(function() {\n                    prevWidth += $(this).width();\n                });\n\n                $(obj).find('li').each(function() {\n                    fullWidth += $(this).width();\n                });\n\n                if (prevWidth >= viewWidth) {\n                    var finalScrollWidth = prevWidth - viewWidth;\n                    if (fullWidth != prevWidth) {\n                        finalScrollWidth += 40;\n                    }\n                    $(obj).find('.nav.nav-tabs').animate({ marginLeft: '-' + finalScrollWidth + 'px'}, speed);\n                }\n\n                if (prevWidth != fullWidth && fullWidth >= viewWidth) {\n                    $(obj).addClass('overflow-right');\n                } else {\n                    $(obj).removeClass('overflow-right');\n                }\n\n                if (prevWidth >= viewWidth && fullWidth >= viewWidth) {\n                    $(obj).addClass('overflow-left');\n                } else {\n                    $(obj).removeClass('overflow-left');\n                }\n            }\n\n            \/\/ function handle tab button action - next \/ prev\n            function handleTabButtonAction(element, direction) {\n                var obj = $(element).closest('.tab-overflow');\n                var marginLeft = parseInt($(obj).find('.nav.nav-tabs').css('margin-left'));\n                var containerWidth = $(obj).width();\n                var totalWidth = 0;\n                var finalScrollWidth = 0;\n\n                $(obj).find('li').each(function() {\n                    if (!$(this).hasClass('next-button') && !$(this).hasClass('prev-button')) {\n                        totalWidth += $(this).width();\n                    }\n                });\n\n                switch (direction) {\n                    case 'next':\n                        var widthLeft = totalWidth + marginLeft - containerWidth;\n                        if (widthLeft <= containerWidth) {\n                            finalScrollWidth = widthLeft - marginLeft;\n                            setTimeout(function() {\n                                $(obj).removeClass('overflow-right');\n                            }, 150);\n                        } else {\n                            finalScrollWidth = containerWidth - marginLeft - 80;\n                        }\n\n                        if (finalScrollWidth != 0) {\n                            $(obj).find('.nav.nav-tabs').animate({ marginLeft: '-' + finalScrollWidth + 'px'}, 150, function() {\n                                $(obj).addClass('overflow-left');\n                            });\n                        }\n                        break;\n                    case 'prev':\n                        var widthLeft = -marginLeft;\n\n                        if (widthLeft <= containerWidth) {\n                            $(obj).removeClass('overflow-left');\n                            finalScrollWidth = 0;\n                        } else {\n                            finalScrollWidth = widthLeft - containerWidth + 80;\n                        }\n                        $(obj).find('.nav.nav-tabs').animate({ marginLeft: '-' + finalScrollWidth + 'px'}, 150, function() {\n                            $(obj).addClass('overflow-right');\n                        });\n                        break;\n                }\n            }\n\n            \/\/ handle page load active tab focus\n            function handlePageLoadTabFocus() {\n                $('.tab-overflow').each(function() {\n                    var targetWidth = $(this).width();\n                    var targetInnerWidth = 0;\n                    var targetTab = $(this);\n                    var scrollWidth = targetWidth;\n\n                    $(targetTab).find('li').each(function() {\n                        var targetLi = $(this);\n                        targetInnerWidth += $(targetLi).width();\n\n                        if ($(targetLi).hasClass('active') && targetInnerWidth > targetWidth) {\n                            scrollWidth -= targetInnerWidth;\n                        }\n                    });\n\n                    handleTabOverflowScrollWidth(this, 0);\n                });\n            }\n\n            \/\/ handle tab next button click action\n            \/\/TODO:not working to investigate\n           \/* $('[data-click=\"next-tab\"]').live('click', function(e) {\n                e.preventDefault();\n                handleTabButtonAction(this,'next');\n            });\n\n            \/\/ handle tab prev button click action\n            $('[data-click=\"prev-tab\"]').live('click', function(e) {\n                e.preventDefault();\n                handleTabButtonAction(this,'prev');\n\n            });*\/\n\n            \/\/ handle unlimited tabs responsive setting\n            $(window).resize(function() {\n                $('.tab-overflow .nav.nav-tabs').removeAttr('style');\n                handlePageLoadTabFocus();\n            });\n\n            handlePageLoadTabFocus();\n        },\n        createNewLesson:function(){\n            var ret_value = {\n                status: \"ok\",\n                data: {\n                    title: '',\n                    subject: '',\n                    rlos: []\n                }\n            };\n            this.initLayout(ret_value);\n        },\n        initLayout:function(data){\n            if (data.status && data.status == 'ok') {\n                var lessonData = data.data;\n                var rlos = lessonData.rlos;\n                for (var i = 0; i < rlos.length; i++) {\n                    rlos[i].id = i;\n                }\n\n                if (this.layout == null) {\n                    \/\/:TODO make new layout\n                    \/\/Create left sidebar populated by rlos models\n                    if(!window.preview_mode){\n                        this.layoutCreateRlo = new LayoutCreateRlo();\n                        this.layoutSidebarRightAdd = new LayoutSidebarRightAdd();\n                        this.layoutPanelButtons = new LayoutPanelButtons();\n                        this.layoutRloButtons  = new LayoutRloButtons();\n                    }\n                    \/\/Create rlo layout. First RLO will open from layoutSideBarRlos\n                    this.rloView = new RloView();\n                    this.layout = new LayoutSidebarRlos({\n                        model: rlos,\n                        lessonData: lessonData\n                    });\n                    \/\/Create right sidebar\n                    this.rlosSidebar = new LayoutSidebarRight();\n                }\n            } else {\n                alert(data.error);\n            }\n        },\n        languageLoaded : function(data){\n            Utils.albTranslation = data;\n            if (this.lessonID == -1) {\n                this.createNewLesson();\n            }else{\n                serverManager.getInstance().loadLessonData(this.initLayout, this.lessonID);\n            }\n        },\n        initServerCalls:function(){\n            this.lessonID = serverManager.getInstance().getLessonID();\n            if (!this.lessonID) {\n                \/\/pt teste\n                this.lessonID = 1000;\n                this.initLayout(testJSON);\n            } else {\n                \/\/console.log('loading language',this.lessonID);\n               if (this.lessonID == -1) {\n                    \/\/this.createNewLesson();\n                    this.initLayout(testJSON);\n                }else{\n                    serverManager.getInstance().loadLessonData(this.initLayout, this.lessonID);\n                }\n                \/\/serverManager.getInstance().getLanguage(this.languageLoaded);\n            }\n        }\n    };\n\n    _.extend(LayoutManager, Singleton);\n\n    return LayoutManager;\n});\n","weightedVote":"2.5","numVotes":"0","author":"kriskate","community":"1","dateAdded":"2015-09-17","pattern":"\\b(resources)\\W+(?:\\w+\\W+){1,600}?templates","replace":"","state":"{\"substEnabled\":false}"}